<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - YouTalk</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>    <!-- Loading Indicator -->
    <div id="loading" class="loading hidden">
        <div class="spinner"></div>
        <span>Đang tải...</span>
    </div>

    <!-- Alert Container -->
    <div id="alert-container" class="alert-container"></div>

    <!-- Admin Content -->
    <main class="admin-container">
        <!-- Sidebar -->
        <aside class="admin-sidebar" id="adminSidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-shield-halved"></i> Admin Panel</h2>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <nav class="sidebar-nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="#dashboard" class="nav-link active" data-section="dashboard">
                            <i class="fas fa-chart-line"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#users" class="nav-link" data-section="users">
                            <i class="fas fa-users"></i>
                            <span>Quản lý User</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#posts" class="nav-link" data-section="posts">
                            <i class="fas fa-file-alt"></i>
                            <span>Quản lý Bài viết</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#comments" class="nav-link" data-section="comments">
                            <i class="fas fa-comments"></i>
                            <span>Quản lý Bình luận</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#products" class="nav-link" data-section="products">
                            <i class="fas fa-box"></i>
                            <span>Quản lý Sản phẩm</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#categories" class="nav-link" data-section="categories">
                            <i class="fas fa-tags"></i>
                            <span>Quản lý Danh mục</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#reports" class="nav-link" data-section="reports">
                            <i class="fas fa-chart-bar"></i>
                            <span>Báo cáo</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#settings" class="nav-link" data-section="settings">
                            <i class="fas fa-cog"></i>
                            <span>Cài đặt</span>
                        </a>
                    </li>
                </ul>
            </nav>            <div class="sidebar-footer">
                <div class="admin-info" id="adminInfo">
                    <div class="admin-avatar">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div class="admin-details">
                        <span class="admin-name">Admin</span>
                        <span class="admin-role">Administrator</span>
                    </div>
                    <button class="admin-logout" id="adminLogout" title="Đăng xuất">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <section class="admin-main" id="adminMain">
            <!-- Dashboard Section -->
            <div class="admin-section active" id="dashboard-section">
                <div class="section-header">
                    <h1>Dashboard</h1>
                    <p>Tổng quan hệ thống YouTalk</p>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid" id="statsGrid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalUsers">0</h3>
                            <p>Tổng người dùng</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalPosts">0</h3>
                            <p>Tổng bài viết</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalComments">0</h3>
                            <p>Tổng bình luận</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalProducts">0</h3>
                            <p>Tổng sản phẩm</p>
                        </div>
                    </div>
                </div>

                <!-- Recent Activities -->
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Hoạt động gần đây</h3>
                            <button class="btn-refresh" id="refreshActivities">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>                        <div class="card-content">
                            <div class="activity-feed" id="recentActivity">
                                <!-- Activities will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Thông tin hệ thống</h3>
                        </div>
                        <div class="card-content">
                            <div class="system-info" id="systemInfo">
                                <!-- System info will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>            <!-- Users Management Section -->
            <div class="admin-section" id="users-section">
                <div class="section-header">
                    <h1>Quản lý người dùng</h1>
                    <div class="section-actions">
                        <button class="btn btn-success" id="addUser">
                            <i class="fas fa-plus"></i> Thêm mới
                        </button>
                        <!-- Debug button -->
                        <button onclick="console.log('Direct onclick works!'); window.adminPanel && window.adminPanel.showAddUserModal();" style="margin-left: 10px;">
                            TEST MODAL
                        </button>
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="userSearch" placeholder="Tìm kiếm người dùng...">
                        </div>
                        <button class="btn btn-primary" id="refreshUsers">
                            <i class="fas fa-sync-alt"></i> Tải lại
                        </button>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table" id="usersTable">                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Avatar</th>
                                <th>Tên</th>
                                <th>Email</th>                                <th>Vai trò</th>
                                <th>Trạng thái</th>
                                <th>Ngày tạo</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <!-- Users data will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <div class="table-pagination" id="usersPagination">
                    <!-- Pagination will be added here -->
                </div>
            </div>

            <!-- Posts Management Section -->
            <div class="admin-section" id="posts-section">
                <div class="section-header">
                    <h1>Quản lý bài viết</h1>
                    <div class="section-actions">
                        <select id="postsFilter" class="form-select">
                            <option value="">Tất cả bài viết</option>
                            <option value="active">Đã duyệt</option>
                            <option value="pending">Chờ duyệt</option>
                            <option value="rejected">Bị từ chối</option>
                        </select>
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="postSearch" placeholder="Tìm kiếm bài viết...">
                        </div>
                        <button class="btn btn-primary" id="refreshPosts">
                            <i class="fas fa-sync-alt"></i> Tải lại
                        </button>
                    </div>
                </div>                <div class="table-container">
                    <table class="data-table" id="postsTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Thông tin bài viết</th>
                                <th>Tác giả</th>
                                <th>Danh mục</th>
                                <th>Trạng thái</th>
                                <th>Lượt xem</th>
                                <th>Bình luận</th>
                                <th>Ngày tạo</th>
                                <th>Thao tác</th>
                            </tr>
                        </thead>
                        <tbody id="postsTableBody">
                            <!-- Posts data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>            <!-- Comments Management Section -->
            <div class="admin-section" id="comments-section">
                <div class="section-header">
                    <h1>Quản lý bình luận</h1>
                    <div class="section-actions">                        <select id="commentsFilter" class="form-select">
                            <option value="">Tất cả bình luận</option>
                            <option value="active">Hoạt động</option>
                            <option value="inactive">Không hoạt động</option>
                            <option value="deleted">Đã xóa</option>
                        </select>
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="commentSearch" placeholder="Tìm kiếm bình luận...">
                        </div>
                        <button class="btn btn-primary" id="refreshComments">
                            <i class="fas fa-sync-alt"></i> Tải lại
                        </button>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table" id="commentsTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nội dung</th>
                                <th>Tác giả</th>
                                <th>Bài viết</th>
                                <th>Trạng thái</th>
                                <th>Ngày tạo</th>
                                <th>Thao tác</th>
                            </tr>
                        </thead>
                        <tbody id="commentsTableBody">
                            <!-- Comments data will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <div class="table-pagination" id="commentsPagination">
                    <!-- Pagination will be added here -->
                </div>
            </div>

            <!-- Products Management Section -->
            <div class="admin-section" id="products-section">
                <div class="section-header">
                    <h1>Quản lý sản phẩm</h1>
                    <div class="section-actions">
                        <button class="btn btn-success" id="addProduct">
                            <i class="fas fa-plus"></i> Thêm sản phẩm
                        </button>
                        <button class="btn btn-primary" id="refreshProducts">
                            <i class="fas fa-sync-alt"></i> Tải lại
                        </button>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table" id="productsTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Hình ảnh</th>
                                <th>Tên sản phẩm</th>
                                <th>Giá</th>
                                <th>Danh mục</th>                                <th>Trạng thái</th>
                                <th>Ngày tạo</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <!-- Products data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Categories Management Section -->
            <div class="admin-section" id="categories-section">
                <div class="section-header">
                    <h1>Quản lý danh mục</h1>
                    <div class="section-actions">
                        <button class="btn btn-success" id="addCategory">
                            <i class="fas fa-plus"></i> Thêm danh mục
                        </button>
                        <button class="btn btn-primary" id="refreshCategories">
                            <i class="fas fa-sync-alt"></i> Tải lại
                        </button>
                    </div>
                </div>

                <div class="categories-grid" id="categoriesGrid">
                    <!-- Categories will be loaded here -->
                </div>
            </div>            <!-- Reports Section -->
            <div class="admin-section" id="reports-section">
                <!-- Content will be dynamically loaded by JavaScript -->
            </div>

            <!-- Settings Section -->
            <div class="admin-section" id="settings-section">
                <div class="section-header">
                    <h1>Cài đặt hệ thống</h1>
                </div>

                <div class="settings-grid">
                    <div class="settings-card">
                        <h3>Cài đặt chung</h3>
                        <form id="generalSettings">
                            <div class="form-group">
                                <label>Tên website</label>
                                <input type="text" id="siteName" value="YouTalk">
                            </div>
                            <div class="form-group">
                                <label>Mô tả website</label>
                                <textarea id="siteDescription">Cộng đồng chia sẻ công nghệ</textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
                        </form>
                    </div>

                    <div class="settings-card">
                        <h3>Cài đặt bảo mật</h3>
                        <form id="securitySettings">
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="enableTwoFA"> 
                                    Bật xác thực 2 bước
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="requireApproval"> 
                                    Yêu cầu duyệt bài viết
                                </label>
                            </div>
                            <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal for editing/viewing details -->
    <div id="adminModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Chi tiết</h3>
                <button class="modal-close" id="modalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic content will be loaded here -->
            </div>
            <div class="modal-footer" id="modalFooter">
                <!-- Action buttons will be added here -->
            </div>
        </div>
    </div>    <!-- Add User Modal -->
    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Thêm người dùng mới</h3>
                <button class="modal-close close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="addUserForm" class="user-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="newUserName">Tên người dùng *</label>
                            <input type="text" id="newUserName" name="username" required>
                        </div>
                        <div class="form-group">
                            <label for="newUserEmail">Email *</label>
                            <input type="email" id="newUserEmail" name="email" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="newUserPassword">Mật khẩu *</label>
                            <input type="password" id="newUserPassword" name="password" required minlength="6">
                        </div>
                        <div class="form-group">
                            <label for="newUserConfirmPassword">Xác nhận mật khẩu *</label>
                            <input type="password" id="newUserConfirmPassword" name="confirm_password" required minlength="6">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="newUserRole">Vai trò</label>
                            <select id="newUserRole" name="role">
                                <option value="user">Người dùng</option>
                                <option value="admin">Admin</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="newUserStatus">Trạng thái</label>
                            <select id="newUserStatus" name="status">
                                <option value="active">Hoạt động</option>
                                <option value="inactive">Không hoạt động</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="newUserBio">Tiểu sử</label>
                        <textarea id="newUserBio" name="bio" rows="3" placeholder="Thông tin ngắn về người dùng..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Hủy</button>
                <button type="button" class="btn btn-success" id="saveNewUser">
                    <i class="fas fa-save"></i> Lưu
                </button>
            </div>
        </div>
    </div>    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/pagination-utils.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/admin-auth.js"></script>
    <script src="js/admin-users-api.js"></script>
    <script src="js/admin-posts-api.js"></script>
    <script src="js/admin-comments-api.js"></script>
    <script src="js/admin-products-api.js"></script>
    <script src="js/admin-categories-api.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>
